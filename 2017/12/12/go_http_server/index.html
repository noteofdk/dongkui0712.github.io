<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="golang," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="本文总结分析 go 1.9 http 服务器的实现
hello world可以用如下代码实现简单的 go 语言 HTTP 服务的 hello world：1234567891011121314151617package mainimport (    &quot;io&quot;    &quot;net/http&quot;    &quot;log&quot;)// hello world, the web serverfunc HelloServer">
<meta property="og:type" content="article">
<meta property="og:title" content="Go package: HTTP 服务器实现">
<meta property="og:url" content="http://dongkui0712.github.io/2017/12/12/go_http_server/index.html">
<meta property="og:site_name" content="DongKui's Note">
<meta property="og:description" content="本文总结分析 go 1.9 http 服务器的实现
hello world可以用如下代码实现简单的 go 语言 HTTP 服务的 hello world：1234567891011121314151617package mainimport (    &quot;io&quot;    &quot;net/http&quot;    &quot;log&quot;)// hello world, the web serverfunc HelloServer">
<meta property="og:updated_time" content="2017-12-13T01:21:03.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Go package: HTTP 服务器实现">
<meta name="twitter:description" content="本文总结分析 go 1.9 http 服务器的实现
hello world可以用如下代码实现简单的 go 语言 HTTP 服务的 hello world：1234567891011121314151617package mainimport (    &quot;io&quot;    &quot;net/http&quot;    &quot;log&quot;)// hello world, the web serverfunc HelloServer">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"hide"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '6311218847856723000',
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://dongkui0712.github.io/2017/12/12/go_http_server/"/>


  <title> Go package: HTTP 服务器实现 | DongKui's Note </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">DongKui's Note</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">仰望星空，脚踏实地！</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Go package: HTTP 服务器实现
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-12-12T16:29:22+08:00" content="2017-12-12">
              2017-12-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index">
                    <span itemprop="name">golang</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>本文总结分析 go 1.9 http 服务器的实现</p>
<h1 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h1><p>可以用如下代码实现简单的 go 语言 HTTP 服务的 hello world：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"io"</span></div><div class="line">    <span class="string">"net/http"</span></div><div class="line">    <span class="string">"log"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="comment">// hello world, the web server</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">HelloServer</span><span class="params">(w http.ResponseWriter, req *http.Request)</span></span> &#123;</div><div class="line">    io.WriteString(w, <span class="string">"hello, world!\n"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    http.HandleFunc(<span class="string">"/hello"</span>, HelloServer)</div><div class="line">    log.Fatal(http.ListenAndServe(<span class="string">":12345"</span>, <span class="literal">nil</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最简单的 golang HTTP 服务器由 <code>http.HandleFunc(pattern string, handler func(ResponseWriter, *Request))</code> 做路由分发， <code>http.ListenAndServe(addr, hanlder)</code> 开启监听并启动服务。</p>
<h2 id="http-HandleFunc"><a href="#http-HandleFunc" class="headerlink" title="http.HandleFunc"></a>http.HandleFunc</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) &#123;</div><div class="line">	DefaultServeMux.HandleFunc(pattern, handler)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>HandleFunc 函数在 DefaultServeMux 中为指定的 pattern 注册 HTTP 服务处理函数 func(ResponseWriter, *Request) ，即由该 handler 处理对 pattern 的请求。</p>
<h2 id="http-ListenAndServe"><a href="#http-ListenAndServe" class="headerlink" title="http.ListenAndServe"></a>http.ListenAndServe</h2><p>代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">func ListenAndServe(addr string, handler Handler) error &#123;</div><div class="line">	server := &amp;Server&#123;Addr: addr, Handler: handler&#125;</div><div class="line">	return server.ListenAndServe()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ListenAndServe 监听 TCP 地址，调用 Server 处理该连接中的请求。如果 handler 为空，则使用 DefaultServeMux。</p>
<p>该函数，其实是默认 Server 的 ListenAndServe 方法的封装。</p>
<h1 id="ServeMux"><a href="#ServeMux" class="headerlink" title="ServeMux"></a>ServeMux</h1><p>ServeMux 是一个 HTTP 请求多路转接器。它将收到的 HTTP 请求的 URL 和已经注册的 pattern 做匹配，并调用最匹配的 pattern 对应的 hanlder 来处理该请求。</p>
<p>pattern 是固定的、以跟路径符号 <code>/</code> 开始的路径，如 “/favicon.ico”。也可以是跟路径的子树，如 “/images/“。匹配时，长 pattern 优先级更高。</p>
<p>以 <code>/</code> 结尾的 pattern 定义了一个子树。<code>/</code> 本身可以匹配任何 pattern。</p>
<p>如果已经注册了一个如 <code>/images/</code> 的子树 pattern，接收到一个如 <code>/images</code> 的不带最后 <code>/</code> 符号的请求时，ServeMux 会将该请求重定向到子树 pattern <code>/images/</code> 对应的处理器 handler（除非 <code>/images</code> 被单独注册）。</p>
<p>pattern 可以可选地指定域名。指定域名的 pattern 只会匹配该域名的 URL。指定域名的 pattern 优先级高于未指定的。</p>
<p>ServeMux also takes care of sanitizing the URL request path,redirecting any request containing . or .. elements or repeated slashes to an equivalent, cleaner URL.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">type ServeMux struct &#123;</div><div class="line">	mu    sync.RWMutex</div><div class="line">	m     map[string]muxEntry</div><div class="line">	hosts bool // whether any patterns contain hostnames</div><div class="line">&#125;</div><div class="line"></div><div class="line">type muxEntry struct &#123;</div><div class="line">	explicit bool</div><div class="line">	h        Handler</div><div class="line">	pattern  string</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ServeMux 的 ServeHTTP 方法分发 HTTP 请求到与其 URL 匹配度最高的 pattern 注册的处理器 h：mux.Handler(r) 返回匹配度最高的处理器 h，然后调用 h.ServeHTTP(w, r) 处理请求。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">func (mux *ServeMux) ServeHTTP(w ResponseWriter, r *Request) &#123;</div><div class="line">	if r.RequestURI == &quot;*&quot; &#123;</div><div class="line">		if r.ProtoAtLeast(1, 1) &#123;</div><div class="line">			w.Header().Set(&quot;Connection&quot;, &quot;close&quot;)</div><div class="line">		&#125;</div><div class="line">		w.WriteHeader(StatusBadRequest)</div><div class="line">		return</div><div class="line">	&#125;</div><div class="line">	h, _ := mux.Handler(r)</div><div class="line">	h.ServeHTTP(w, r)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h1><p>Server 结构体定义启动 HTTP 服务器的参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">type Server struct &#123;</div><div class="line">	Addr      string</div><div class="line">	Handler   Handler</div><div class="line">	TLSConfig *tls.Config</div><div class="line"></div><div class="line">	ReadTimeout time.Duration</div><div class="line">	ReadHeaderTimeout time.Duration</div><div class="line">	WriteTimeout time.Duration</div><div class="line">	IdleTimeout time.Duration</div><div class="line"></div><div class="line">	MaxHeaderBytes int</div><div class="line"></div><div class="line">	TLSNextProto map[string]func(*Server, *tls.Conn, Handler)</div><div class="line"></div><div class="line">	ConnState func(net.Conn, ConnState)</div><div class="line"></div><div class="line">	ErrorLog *log.Logger</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>此处的 Handler 是个接口，意味着只要实现 ServeHTTP(ResponseWriter, *Request) 方法，就能作为 Server 的 Handler：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">type Handler interface &#123;</div><div class="line">	ServeHTTP(ResponseWriter, *Request)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="ListenAndServe-方法"><a href="#ListenAndServe-方法" class="headerlink" title="ListenAndServe 方法"></a>ListenAndServe 方法</h2><p>ListenAndServe 方法监听 Addr 字段指定的 TCP 连接，处理请求。接收的连接激活了 TCP keep-alives。如果 Addr 为空，则使用 “:http”。总是返回非空 error。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">func (srv *Server) ListenAndServe() error &#123;</div><div class="line">	addr := srv.Addr</div><div class="line">	if addr == &quot;&quot; &#123;</div><div class="line">		addr = &quot;:http&quot;</div><div class="line">	&#125;</div><div class="line">	ln, err := net.Listen(&quot;tcp&quot;, addr)</div><div class="line">	if err != nil &#123;</div><div class="line">		return err</div><div class="line">	&#125;</div><div class="line">	return srv.Serve(tcpKeepAliveListener&#123;ln.(*net.TCPListener)&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ListenAndServe 方法的实现主要有两个步骤：</p>
<ul>
<li>net.Listen(“tcp”, addr) 得到 net.Listener</li>
<li>Serve 方法并发处理监听到的请求</li>
</ul>
<p>下面看看 Serve 方法实现的主要步骤（只保留主要逻辑）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">func (srv *Server) Serve(l net.Listener) error &#123;</div><div class="line">	defer l.Close()</div><div class="line">	</div><div class="line">	...</div><div class="line">	</div><div class="line">	baseCtx := context.Background() // base is always background, per Issue 16220</div><div class="line">	ctx := context.WithValue(baseCtx, ServerContextKey, srv)</div><div class="line">	for &#123;</div><div class="line">		rw, _ := l.Accept()</div><div class="line">		c := srv.newConn(rw)</div><div class="line">		go c.serve(ctx)</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最终，serve 方法调用 Server 中的 Handler 的 ServeHTTP 方法处理该请求。</p>
<h1 id="注册函数"><a href="#注册函数" class="headerlink" title="注册函数"></a>注册函数</h1><p>Handle 和 HandleFunc 将 HTTP 请求处理函数注册到 ServeMux 中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">func Handle(pattern string, handler Handler) &#123; </div><div class="line">    DefaultServeMux.Handle(pattern, handler) </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) &#123;</div><div class="line">	DefaultServeMux.HandleFunc(pattern, handler)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用方式略有差别。</p>
<p><code>HandleFunc（pattern, handler)</code> 与 <code>Handle(pattern, HandlerFunc(handler))</code> 效果一样。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">http.Handle(&quot;/foo&quot;, http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) &#123;</div><div class="line">	fmt.Fprintf(w, &quot;Hello, %q&quot;, html.EscapeString(r.URL.Path))</div><div class="line">&#125;))</div><div class="line"></div><div class="line">http.HandleFunc(&quot;/bar&quot;, func(w http.ResponseWriter, r *http.Request) &#123;</div><div class="line">	fmt.Fprintf(w, &quot;Hello, %q&quot;, html.EscapeString(r.URL.Path))</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>也可以从 ServeMux.HandleFunc 的实现看出来：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">func (mux *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *Request)) &#123;</div><div class="line">	mux.Handle(pattern, HandlerFunc(handler))</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h1><p>http 包有几个概念易混，特别分析对比一下。</p>
<h2 id="HandlerFunc"><a href="#HandlerFunc" class="headerlink" title="HandlerFunc"></a>HandlerFunc</h2><p>HandlerFunc 是一种类型，是以 func(ResponseWriter, *Request) 申明的函数。是个将普通函数转化为 HTTP 处理器的适配器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">type HandlerFunc func(ResponseWriter, *Request)</div><div class="line"></div><div class="line">// ServeHTTP calls f(w, r).</div><div class="line">func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) &#123;</div><div class="line">	f(w, r)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>用法：</p>
<p>定义普通函数 handlerFunc 如下，HandlerFunc(f) 即是一个调用 f 的 HTTP 处理器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">func f(w http.ResponseWriter, r *http.Request) &#123; ... &#125;</div></pre></td></tr></table></figure></p>
<h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><p>Handler 是个接口。功能如其名：处理器。</p>
<p>http 包中实现 ServeHTTP(ResponseWriter, *Request) 方法即拥有处理 HTTP 请求的能力。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">type Handler interface &#123;</div><div class="line">	ServeHTTP(ResponseWriter, *Request)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>HandlerFunc 类型和 ServeMux 结构体都实现了 ServeHTTP(w ResponseWriter, r *Request) 方法， 也就是说，HandlerFunc 类型和 ServeMux 结构体都是一种 Handler。</p>
<p>HandlerFunc 的 ServeHTTP 方法直接调用自身，处理 HTTP 请求。</p>
<p>ServeMux 调用与请求路径匹配的 <code>func(ResponseWriter, *Request)</code> 类型的处理函数。</p>
<p>同样的，我们可以自己定义一个实现 ServeHTTP(ResponseWriter, *Request) 方法的结构体，定制我们自己的 HTTP 处理器。第三方的路由处理器（如 mux, httprouter 等）都是 Handler 的一种实现。</p>
<p>Handle 和 HandleFunc 的作用就是将 HTTP 请求处理函数注册到 ServeMux 中。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/golang/" rel="tag">#golang</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/10/27/resource_pool/" rel="next" title="Resource Pool">
                <i class="fa fa-chevron-left"></i> Resource Pool
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="DongKui" />
          <p class="site-author-name" itemprop="name">DongKui</p>
          <p class="site-description motion-element" itemprop="description">散卷凉盏伴携程，一蓑烟雨任平生</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/dongkui0712" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/dongkui0712" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/5535040657" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

	

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#hello-world"><span class="nav-number">1.</span> <span class="nav-text">hello world</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#http-HandleFunc"><span class="nav-number">1.1.</span> <span class="nav-text">http.HandleFunc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#http-ListenAndServe"><span class="nav-number">1.2.</span> <span class="nav-text">http.ListenAndServe</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ServeMux"><span class="nav-number">2.</span> <span class="nav-text">ServeMux</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Server"><span class="nav-number">3.</span> <span class="nav-text">Server</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ListenAndServe-方法"><span class="nav-number">3.1.</span> <span class="nav-text">ListenAndServe 方法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#注册函数"><span class="nav-number">4.</span> <span class="nav-text">注册函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#比较"><span class="nav-number">5.</span> <span class="nav-text">比较</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HandlerFunc"><span class="nav-number">5.1.</span> <span class="nav-text">HandlerFunc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Handler"><span class="nav-number">5.2.</span> <span class="nav-text">Handler</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DongKui</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
